{"ast":null,"code":"/**\r\n * Defines the base URL for the API.\r\n * The default values is overridden by the `API_BASE_URL` environment variable.\r\n */\n\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || \"https://localhost:5002\";\n\n/**\r\n * Defines the default headers for these functions to work with `json-server`\r\n */\nconst headers = new Headers();\nheaders.append(\"Content-Type\", \"application/json\");\n\n/**\r\n * Fetch `json` from the specified URL and handle error status codes and ignore `AbortError`s\r\n *\r\n * This function is NOT exported because it is not needed outside of this file.\r\n *\r\n * @param url\r\n *  the url for the requst.\r\n * @param options\r\n *  any options for fetch\r\n * @param onCancel\r\n *  value to return if fetch call is aborted. Default value is undefined.\r\n * @returns {Promise<Error|any>}\r\n *  a promise that resolves to the `json` data or an error.\r\n *  If the response is not in the 200 - 399 range the promise is rejected.\r\n */\nasync function fetchJson(url, options, onCancel) {\n  try {\n    const response = await fetch(url, options);\n    if (response.status === 204) {\n      return null;\n    }\n    const payload = await response.json();\n    if (payload.error) {\n      return Promise.reject({\n        message: payload.error\n      });\n    }\n    return payload.data;\n  } catch (error) {\n    if (error.name !== \"AbortError\") {\n      console.error(error.stack);\n      throw error;\n    }\n    return Promise.resolve(onCancel);\n  }\n}\n\n/**\r\n * Retrieves all existing jobs.\r\n * @returns {Promise<[job]>}\r\n *  a promise that resolves to a possibly empty array of jobs saved in the database.\r\n */\n\nexport async function listJobs(params, signal) {\n  const url = new URL(`${API_BASE_URL}/jobs`);\n  return await fetchJson(url, {\n    headers,\n    signal\n  }, []);\n}\nexport async function readJobs(job_id, signal) {\n  const url = `${API_BASE_URL}/jobs/${job_id}/edit`;\n  return await fetchJson(url, {\n    headers,\n    signal\n  });\n}\nexport async function createJobs(job, signal) {\n  const url = `${API_BASE_URL}/jobs`;\n  const options = {\n    method: \"POST\",\n    headers,\n    body: JSON.stringify({\n      data: job\n    }),\n    signal\n  };\n  return await fetchJson(url, options, job);\n}\nexport async function deleteJobs(job, job_id, signal) {\n  const url = `${API_BASE_URL}/jobs/${job_id}/edit`;\n  const options = {\n    method: 'DELETE',\n    signal\n  };\n  return await fetchJson(url, options, job);\n}\nexport async function updateJob(job, job_id, signal) {\n  //console.log(job)\n  //console.log(job_id)\n  const url = `${API_BASE_URL}/jobs/${job_id}/edit`;\n  const options = {\n    method: \"PUT\",\n    body: JSON.stringify({\n      data: {\n        ...job\n      }\n    }),\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    signal\n  };\n  return await fetchJson(url, options, job);\n}\nexport async function convertToBase64URL(file) {\n  return new Promise(resolve => {\n    const reader = new FileReader();\n    reader.onload = () => {\n      const base64DataURL = reader.result;\n      resolve(base64DataURL);\n    };\n    reader.readAsDataURL(file);\n  });\n}\nfunction createObjectURLFromBase64(base64Data) {\n  const blob = new Blob([base64Data], {\n    type: \"image/png\"\n  }); // Adjust the MIME type if needed\n  return URL.createObjectURL(blob);\n}","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_BASE_URL","headers","Headers","append","fetchJson","url","options","onCancel","response","fetch","status","payload","json","error","Promise","reject","message","data","name","console","stack","resolve","listJobs","params","signal","URL","readJobs","job_id","createJobs","job","method","body","JSON","stringify","deleteJobs","updateJob","convertToBase64URL","file","reader","FileReader","onload","base64DataURL","result","readAsDataURL","createObjectURLFromBase64","base64Data","blob","Blob","type","createObjectURL"],"sources":["C:/Users/parad/Programming/PetProjects/tile_website/frontend/src/utils/api.js"],"sourcesContent":["/**\r\n * Defines the base URL for the API.\r\n * The default values is overridden by the `API_BASE_URL` environment variable.\r\n */\r\n\r\n\r\nconst API_BASE_URL =\r\n  process.env.REACT_APP_API_BASE_URL || \"https://localhost:5002\";\r\n\r\n/**\r\n * Defines the default headers for these functions to work with `json-server`\r\n */\r\nconst headers = new Headers();\r\nheaders.append(\"Content-Type\", \"application/json\");\r\n\r\n/**\r\n * Fetch `json` from the specified URL and handle error status codes and ignore `AbortError`s\r\n *\r\n * This function is NOT exported because it is not needed outside of this file.\r\n *\r\n * @param url\r\n *  the url for the requst.\r\n * @param options\r\n *  any options for fetch\r\n * @param onCancel\r\n *  value to return if fetch call is aborted. Default value is undefined.\r\n * @returns {Promise<Error|any>}\r\n *  a promise that resolves to the `json` data or an error.\r\n *  If the response is not in the 200 - 399 range the promise is rejected.\r\n */\r\nasync function fetchJson(url, options, onCancel) {\r\n  try {\r\n    const response = await fetch(url, options);\r\n\r\n    if (response.status === 204) {\r\n      return null;\r\n    }\r\n\r\n    const payload = await response.json();\r\n\r\n    if (payload.error) {\r\n      return Promise.reject({ message: payload.error });\r\n    }\r\n    return payload.data;\r\n  } catch (error) {\r\n    if (error.name !== \"AbortError\") {\r\n      console.error(error.stack);\r\n      throw error;\r\n    }\r\n    return Promise.resolve(onCancel);\r\n  }\r\n}\r\n\r\n/**\r\n * Retrieves all existing jobs.\r\n * @returns {Promise<[job]>}\r\n *  a promise that resolves to a possibly empty array of jobs saved in the database.\r\n */\r\n\r\nexport async function listJobs(params, signal) {\r\n  const url = new URL(`${API_BASE_URL}/jobs`);\r\n\r\n  return await fetchJson(url, { headers, signal }, [])\r\n}\r\n\r\nexport async function readJobs(job_id, signal){\r\n  const url = `${API_BASE_URL}/jobs/${job_id}/edit`\r\n  return await fetchJson(url, { headers, signal })\r\n}\r\n\r\nexport async function createJobs(job, signal) {\r\n  const url = `${API_BASE_URL}/jobs`;\r\n  const options = {\r\n    method: \"POST\",\r\n    headers,\r\n    body: JSON.stringify({ data: job }),\r\n    signal,\r\n  };\r\n  return await fetchJson(url, options, job);\r\n}\r\n\r\nexport async function deleteJobs(job, job_id, signal){\r\n  const url = `${API_BASE_URL}/jobs/${job_id}/edit`;\r\n  const options = {\r\n    method: 'DELETE',\r\n    signal\r\n  }\r\n  return await fetchJson(url, options, job)\r\n}\r\n\r\nexport async function updateJob(job, job_id, signal) {\r\n  //console.log(job)\r\n  //console.log(job_id)\r\n  const url = `${API_BASE_URL}/jobs/${job_id}/edit`;\r\n  const options = {\r\n    method: \"PUT\",\r\n    body: JSON.stringify({ data: { ...job } }),\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    signal,\r\n  };\r\n  return await fetchJson(url, options, job);\r\n}\r\n\r\nexport async function convertToBase64URL(file) {\r\n  return new Promise((resolve) => {\r\n    const reader = new FileReader();\r\n\r\n    reader.onload = () => {\r\n      const base64DataURL = reader.result;\r\n      resolve(base64DataURL);\r\n    };\r\n\r\n    reader.readAsDataURL(file);\r\n  });\r\n} \r\n\r\n function createObjectURLFromBase64(base64Data) {\r\n  const blob = new Blob([base64Data], { type: \"image/png\" }); // Adjust the MIME type if needed\r\n  return URL.createObjectURL(blob);\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}